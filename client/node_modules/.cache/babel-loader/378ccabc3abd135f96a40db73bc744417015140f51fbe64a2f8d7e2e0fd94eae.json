{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\CascadeProjects\\\\print-catalog-app\\\\client\\\\src\\\\pages\\\\ProfilePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Container, Paper, Typography, TextField, Button, Box, Alert } from '@mui/material';\nimport { useAuth } from '../context/AuthContext';\nimport { updateUserProfile } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfilePage = () => {\n  _s();\n  const {\n    user,\n    login: updateAuth\n  } = useAuth();\n  const [formData, setFormData] = useState({\n    name: user.name,\n    currentPassword: '',\n    newPassword: '',\n    confirmNewPassword: ''\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    if (formData.newPassword && formData.newPassword !== formData.confirmNewPassword) {\n      setError('New passwords do not match');\n      return;\n    }\n    setLoading(true);\n    try {\n      const updateData = {\n        name: formData.name,\n        ...(formData.currentPassword && {\n          currentPassword: formData.currentPassword,\n          newPassword: formData.newPassword\n        })\n      };\n      const response = await updateUserProfile(updateData);\n      updateAuth(response.data.token, response.data.user);\n      setSuccess('Profile updated successfully');\n\n      // Clear password fields\n      setFormData(prev => ({\n        ...prev,\n        currentPassword: '',\n        newPassword: '',\n        confirmNewPassword: ''\n      }));\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to update profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 4,\n        mt: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: \"Profile Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          mb: 2\n        },\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          name: \"name\",\n          label: \"Name\",\n          value: formData.name,\n          onChange: handleChange,\n          fullWidth: true,\n          required: true,\n          margin: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            mt: 3,\n            mb: 2\n          },\n          children: \"Change Password (optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"currentPassword\",\n          label: \"Current Password\",\n          type: \"password\",\n          value: formData.currentPassword,\n          onChange: handleChange,\n          fullWidth: true,\n          margin: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"newPassword\",\n          label: \"New Password\",\n          type: \"password\",\n          value: formData.newPassword,\n          onChange: handleChange,\n          fullWidth: true,\n          margin: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"confirmNewPassword\",\n          label: \"Confirm New Password\",\n          type: \"password\",\n          value: formData.confirmNewPassword,\n          onChange: handleChange,\n          fullWidth: true,\n          margin: \"normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          fullWidth: true,\n          size: \"large\",\n          disabled: loading,\n          sx: {\n            mt: 3\n          },\n          children: loading ? 'Updating...' : 'Update Profile'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfilePage, \"AC2/pyaDCFjq5EW9ilRkJUREFjY=\", false, function () {\n  return [useAuth];\n});\n_c = ProfilePage;\nexport default ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["React","useState","Container","Paper","Typography","TextField","Button","Box","Alert","useAuth","updateUserProfile","jsxDEV","_jsxDEV","ProfilePage","_s","user","login","updateAuth","formData","setFormData","name","currentPassword","newPassword","confirmNewPassword","error","setError","success","setSuccess","loading","setLoading","handleChange","e","value","target","prev","handleSubmit","preventDefault","updateData","response","data","token","err","_err$response","_err$response$data","maxWidth","children","elevation","sx","p","mt","variant","component","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","severity","mb","onSubmit","label","onChange","fullWidth","required","margin","type","color","size","disabled","_c","$RefreshReg$"],"sources":["C:/Users/admin/CascadeProjects/print-catalog-app/client/src/pages/ProfilePage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  Box,\n  Alert,\n} from '@mui/material';\nimport { useAuth } from '../context/AuthContext';\nimport { updateUserProfile } from '../services/api';\n\nconst ProfilePage = () => {\n  const { user, login: updateAuth } = useAuth();\n  const [formData, setFormData] = useState({\n    name: user.name,\n    currentPassword: '',\n    newPassword: '',\n    confirmNewPassword: '',\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n\n    if (formData.newPassword && formData.newPassword !== formData.confirmNewPassword) {\n      setError('New passwords do not match');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const updateData = {\n        name: formData.name,\n        ...(formData.currentPassword && {\n          currentPassword: formData.currentPassword,\n          newPassword: formData.newPassword,\n        }),\n      };\n\n      const response = await updateUserProfile(updateData);\n      updateAuth(response.data.token, response.data.user);\n      setSuccess('Profile updated successfully');\n      \n      // Clear password fields\n      setFormData(prev => ({\n        ...prev,\n        currentPassword: '',\n        newPassword: '',\n        confirmNewPassword: '',\n      }));\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to update profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Paper elevation={3} sx={{ p: 4, mt: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Profile Settings\n        </Typography>\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        {success && (\n          <Alert severity=\"success\" sx={{ mb: 2 }}>\n            {success}\n          </Alert>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <TextField\n            name=\"name\"\n            label=\"Name\"\n            value={formData.name}\n            onChange={handleChange}\n            fullWidth\n            required\n            margin=\"normal\"\n          />\n\n          <Typography variant=\"h6\" sx={{ mt: 3, mb: 2 }}>\n            Change Password (optional)\n          </Typography>\n\n          <TextField\n            name=\"currentPassword\"\n            label=\"Current Password\"\n            type=\"password\"\n            value={formData.currentPassword}\n            onChange={handleChange}\n            fullWidth\n            margin=\"normal\"\n          />\n\n          <TextField\n            name=\"newPassword\"\n            label=\"New Password\"\n            type=\"password\"\n            value={formData.newPassword}\n            onChange={handleChange}\n            fullWidth\n            margin=\"normal\"\n          />\n\n          <TextField\n            name=\"confirmNewPassword\"\n            label=\"Confirm New Password\"\n            type=\"password\"\n            value={formData.confirmNewPassword}\n            onChange={handleChange}\n            fullWidth\n            margin=\"normal\"\n          />\n\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            fullWidth\n            size=\"large\"\n            disabled={loading}\n            sx={{ mt: 3 }}\n          >\n            {loading ? 'Updating...' : 'Update Profile'}\n          </Button>\n        </form>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default ProfilePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}